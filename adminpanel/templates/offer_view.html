
{% load humanize %}
{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <title>{% block title %}
   Offer View
  {% endblock %}</title>
    <!-- HTML5 Shim and Respond.js IE11 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 11]>
		<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
		<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->
    <!-- Meta -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="description" content="Free Datta Able Admin Template come up with latest Bootstrap 4 framework with basic components, form elements and lots of pre-made layout options" />
    <meta name="keywords" content="admin templates, bootstrap admin templates, bootstrap 4, dashboard, dashboard templets, sass admin templets, html admin templates, responsive, bootstrap admin templates free download,premium bootstrap admin templates, datta able, datta able bootstrap admin template, free admin theme, free dashboard template"/>
    <meta name="author" content="CodedThemes"/>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
     <!--     Fonts and icons     -->
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900|Roboto+Slab:400,700" />
    <!-- Favicon icon -->
    <link rel="icon" href="{% static 'assets/images/favicon.ico' %}" type="image/x-icon">
    <!-- fontawesome icon -->
    <link rel="stylesheet" href="{% static 'assets/fonts/fontawesome/css/fontawesome-all.min.css' %}">
    <!-- animation css -->
    <link rel="stylesheet" href="{% static 'assets/plugins/animation/css/animate.min.css' %}">
    <!-- vendor css -->
    <link rel="stylesheet" href="{% static 'assets/css/style.css' %}">
    <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
  <!-- Nucleo Icons -->
  <link href="{% static 'assets/css/nucleo-icons.css' %}" rel="stylesheet" />
  <link href="{% static 'assets/css/nucleo-svg.css' %}" rel="stylesheet" />
  <link id="pagestyle" href="{% static 'assets/css/material-dashboard.css?v=3.0.2' %}" rel="stylesheet" />
</head>

<body>
    <!-- [ Pre-loader ] start -->
    <div class="loader-bg">
        <div class="loader-track">
            <div class="loader-fill"></div>
        </div>
    </div>
    <!-- [ Pre-loader ] End -->
    <!-- [ navigation menu ] start -->
    <nav class="pcoded-navbar">
        <div class="navbar-wrapper">
            <div class="navbar-brand header-logo">
                <a href="/admin_home" class="b-brand">
                    <div class="b-bg">
                        <i class="feather icon-trending-up"></i>
                    </div>
                    <span class="b-title">Oh Baby!</span>
                </a>
                <a class="mobile-menu" id="mobile-collapse" href="javascript:"><span></span></a>
            </div>
            <div class="navbar-content scroll-div">
                <ul class="nav pcoded-inner-navbar">
                    <!-- <li class="nav-item pcoded-menu-caption">
                        <label>Navigation</label>
                    </li> -->
                    <li data-username="dashboard Default Ecommerce CRM Analytics Crypto Project" class="nav-item active">
                        <a href="/admin_home" class="nav-link "><span class="pcoded-micon"><i class="feather icon-home"></i></span><span class="pcoded-mtext">Dashboard</span></a>
                    </li>
                    <li data-username="dashboard Default Ecommerce CRM Analytics Crypto Project" class="nav-item active">
                        <a href="/admin_products" class="nav-link "><span class="pcoded-micon"><i class="feather icon-home"></i></span><span class="pcoded-mtext">Product Management</span></a>
                    </li>
                    <li data-username="basic components Button Alert Badges breadcrumb Paggination progress Tooltip popovers Carousel Cards Collapse Tabs pills Modal Grid System Typography Extra Shadows Embeds" class="nav-item active">
                        <a href="/admin_category" class="nav-link "><span class="pcoded-micon"><i class="feather icon-box"></i></span><span class="pcoded-mtext">Category Management</span></a>
                    </li>
                    <li data-username="Table bootstrap datatable footable" class="nav-item active">
                        <a href="/admin_usersview" class="nav-link "><span class="pcoded-micon"><i class="feather icon-server"></i></span><span class="pcoded-mtext">User Management</span></a>
                    </li>
                    <li data-username="form elements advance componant validation masking wizard picker select" class="nav-item active">
                        <a href="/admin_offerview" class="nav-link "><span class="pcoded-micon"><i class="feather icon-file-text"></i></span><span class="pcoded-mtext">Coupon/Offer</span></a>
                    </li>
                    <li data-username="Charts Morris" class="nav-item active"><a href="/admin_order" class="nav-link "><span class="pcoded-micon"><i class="feather icon-pie-chart"></i></span><span class="pcoded-mtext">Orders</span></a></li>
                    <li data-username="Table bootstrap datatable footable" class="nav-item active  pcoded-hasmenu">
                      <a href="javascript:" class="nav-link "><span class="pcoded-micon"><i class="feather icon-clipboard"></i></span><span class="pcoded-mtext">Reports</span></a>
                      <ul class="pcoded-submenu">
                          <li class=""><a href="{% url 'sales_report2' %}" class="" target="_blank">Monthly/Yearly Report</a></li>
                          <li class=""><a href="{% url 'sales_report' %}" class="" target="_blank">Sales Report</a></li>
                      </ul>
                  </li>
            </div>
        </div>
    </nav>
    <!-- [ navigation menu ] end -->

    <!-- [ Header ] start -->
    <header class="navbar pcoded-header navbar-expand-lg navbar-light">
        <div class="m-header">
            <a class="mobile-menu" id="mobile-collapse1" href="javascript:"><span></span></a>
            <a href="/admin_home" class="b-brand">
                   <div class="b-bg">
                       <i class="feather icon-trending-up"></i>
                   </div>
                   <span class="b-title">Oh Baby!</span>
               </a>
        </div>
        <a class="mobile-menu" id="mobile-header" href="javascript:">
            <i class="feather icon-more-horizontal"></i>
        </a>
        <div class="collapse navbar-collapse">
            <ul class="navbar-nav mr-auto">
                <li><a href="javascript:" class="full-screen" onclick="javascript:toggleFullScreen()"><i class="feather icon-maximize"></i></a></li>
                <!-- <li class="nav-item dropdown">
                    <a class="dropdown-toggle" href="javascript:" data-toggle="dropdown">Dropdown</a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="javascript:">Action</a></li>
                        <li><a class="dropdown-item" href="javascript:">Another action</a></li>
                        <li><a class="dropdown-item" href="javascript:">Something else here</a></li>
                    </ul>
                </li> -->
                <li class="nav-item">
                    <div class="main-search">
                        <div class="input-group">
                            <form class="form-inline my-lg-0" method="POST" action="">
                                {% csrf_token %}
                                <input type="text" id="m-search" class="form-control" placeholder="Search . . .">
                                <a href="javascript:" class="input-group-append search-close">
                                    <i class="feather icon-x input-group-text"></i>
                                </a>
                                <span class="input-group-append search-btn btn btn-primary">
                                    <i class="feather icon-search input-group-text"></i>
                                </span>
                            </form>
                        </div>
                    </div>
                </li>
            </ul>
            <ul class="navbar-nav ml-auto">
        
                <li >
                    <a class="nav-link text-dark " href="#">
                      <div class="text-dark text-center me-2 d-flex align-items-center justify-content-center">
                        <i class="material-icons opacity-10">person</i><span class="nav-link-text ms-1">{{user.first_name}}</span>
                      </div>
                      
                    </a>
                  </li>
                  <li >
                    <a class="nav-link text-dark " href="#">
                      <div class="text-dark text-center me-2 d-flex align-items-center justify-content-center">
                        <i class="material-icons opacity-10" >logout</i><a href="/admin_signout" class="nav-item nav-link">Signout</a>
                      </div>
                      
                    </a>
                  </li>
                
            </ul>
        </div>
    </header>

{% block content%} 
<div class="pl-5">
<div class="p-5 justify-content-center pull-left" style="line-height: 1">
<div class="d-flex justify-content-between">
  <div class="text-right mb-3 mr-3"><hr><a href="{% url 'add_coupon' %}" class="btn btn-primary"> Add Coupon </a></div>
 
  <div class="text-right mb-3 mr-3"><hr><a href="{% url 'add_product_offer' %}" class="btn btn-primary"> Add Product Offer</a></div>
  <div class="text-right mb-3 mr-3"><hr><a href="{% url 'add_cat_offer' %}" class="btn btn-primary"> Add Category Offer</a></div>
</div>
          


<div class="card mb-3">
  <div class="card-header">
      <i class="fas fa-table me-1"></i>
      Coupon Offers
  </div>
  <div class="card-body"> 
      <table id="datatablesSimple"  class="table table-bordered data-table table-hover" >
          <thead>
              <tr>
                <th>Coupon Code</th>
                  <th>Valid From</th>
                  <th>Valid To</th>
                  <th>Discount</th>
                  <th>Edit</th>
                <th scope="col">Block/Activate</th>
                <!-- <th>Edit User</th> -->
                <th scope="col">Delete Coupon</th>
              </tr>
          </thead>
          
          <tbody>
         
               {% for offer in coupon_offers %}
            <tr class="gradeX">
          
               <td>{{offer.code}}</td>
              <td>{{offer.valid_from }}</td>
              <td>{{offer.valid_to}}</td>
              <td>{{offer.discount}}</td>
              <td> <a href="{% url 'edit_coupon' offer.id %}" class="btn btn-primary">Edit</a></td>
              {% if offer.active %}
              <td><a class="confirm-block" id="blockCouponBtn"
                onclick="blockCoupon('{{offer.id}}')">
                <button class="btn btn-warning"> <i class="icon-ban-circle"></i>Deactivate</button> </a></td>
              {% else %}
              <td><a class="confirm-activate" id="actCouponBtn" onclick="actCoupon('{{offer.id}}')"><button class="btn btn-success"> <i class="icon-play"></i>Activate</button></a></td>
              {% endif %}
              <!-- <td><a href="admin_user_edit/{{user.id}}" onclick="return confirm('Are you sure you want to EDIT this user?')"><button class="btn btn-primary "> <i class="icon-edit"></i> Edit</button></a></td> -->
              <td><a  class="confirm-delete" id="delCouponBtn" onclick="delCoupon('{{offer.id}}')" >  <button class="btn btn-danger"> <i class="icon-trash"></i> Delete </button></a></td>
              <!-- <td class="center">4</td> -->
            </tr>
           
            {% endfor %}       
          </tbody>
      </table>
  </div>
</div>


<!-- experimenting below this -->

<div class="card mb-3">
  <div class="card-header">
      <i class="fas fa-table me-1"></i>
      Category Offers
  </div>
<div  class="card-body ">
  <table class="table table-bordered data-table table-hover">
    <thead>
      <tr>
        <th>Coupon Code</th>
        <th>Category</th>
        <th>Valid From</th>
        <th>Valid To</th>
        <th>Discount</th>
        <th>Edit</th>
        <th>Block/Activate</th>
          <!-- <th>Edit User</th> -->
          <th>Delete</th>
        <!-- <th>Offer Active</th> -->
        
      </tr>
    </thead>
    <tbody>
      {% for offer in cat_offers %}
      <tr class="gradeX">
        
        <td>{{offer.code}}</td>
        <td>{{offer.category.category_name}}</td>
        <td>{{offer.valid_from }}</td>
        <td>{{offer.valid_to }}</td>
        <td>{{offer.discount}}</td>
        <td> <a href="{% url 'edit_cat_offer' offer.id %}" class="btn btn-primary">Edit</a></td>
        {% if offer.is_active %}
        <td><a class="confirm-block" id="blockCatOfferBtn"
          onclick="blockCatOffer('{{offer.id}}')">
          <button class="btn btn-warning"> <i class="icon-ban-circle"></i>Deactivate</button> </a></td>
        {% else %}
        <td><a class="confirm-activate" id="actCatOfferBtn" onclick="actCatOffer('{{offer.id}}')"><button class="btn btn-success"> <i class="icon-play"></i>Activate</button></a></td>
        {% endif %}
        <!-- <td><a href="admin_user_edit/{{user.id}}" onclick="return confirm('Are you sure you want to EDIT this user?')"><button class="btn btn-primary "> <i class="icon-edit"></i> Edit</button></a></td> -->
        <td><a  class="confirm-delete" id="delCatOfferBtn" onclick="delCatOffer('{{offer.id}}')" >  <button class="btn btn-danger"> <i class="icon-trash"></i> Delete </button></a></td>
        <!-- <td class="center">4</td> -->
        
      </tr>
      {% endfor %}
   
      
    </tbody>
  </table>
</div>
</div>




<div class="card mb-5">
  <div class="card-header">
      <i class="fas fa-table me-1"></i>
      Product Offers
  </div>
    <div  class="card-body">
      <table class="table table-bordered data-table table-hover table-responsive" >
        <thead>
          <tr>
            <th>Coupon Code</th>
            <th>Product</th>
            <th>Valid From</th>
            <th>Valid To</th>
            <th>Discount</th>
            <th>Edit</th>
            <!-- <th>Offer Active</th> -->
              <th>Block/Activate</th>
              <!-- <th>Edit User</th> -->
              <th>Delete</th>
            <!-- <th>Offer Active</th> -->
            
            
          </tr>
        </thead>
        <tbody>
          {% for offer in prod_offers %}
          <tr class="gradeX">
            
            <td>{{offer.code}}</td>
            <td ><div>{{offer.product.product_name}}</td>

            <td>{{offer.valid_from}}</td>
            <td>{{offer.valid_to }}</td>
            <td>{{offer.discount}} </td>
            <td> <a href="{% url 'edit_product_offer' offer.id %}" class="btn btn-primary">Edit</a></td>

          {% if offer.is_active %}
            <td><a class="confirm-block" id="blockProdOfferBtn"
              onclick="blockProOffer('{{offer.id}}')">
              <button class="btn btn-warning"> <i class="icon-ban-circle"></i> Block </button> </a></td>
            {% else %}
            <td><a class="confirm-activate" id="actProdOfferBtn" onclick="actProOffer('{{offer.id}}')"><button class="btn btn-success"> <i class="icon-play"></i> Activate Offer</button></a></td>
            {% endif %}
            <!-- <td><a href="admin_user_edit/{{user.id}}" onclick="return confirm('Are you sure you want to EDIT this user?')"><button class="btn btn-primary "> <i class="icon-edit"></i> Edit</button></a></td> -->
            <td><a  class="confirm-delete" id="delProOfferBtn" onclick="delProOffer('{{offer.id}}')" >  <button class="btn btn-danger"> <i class="icon-trash"></i> Delete </button></a></td>
            <!-- <td class="center">4</td> -->
            
          </tr>
          {% endfor %}
      
          
        </tbody>
      </table>
    </div>
</div>

</div>
</div>


<!-- experimenting above this line -->





<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>


<script>

function blockCoupon(couponId){
  var data = {'couponId' : couponId}

  Swal.fire({
    title: 'Are you sure?',
    text: "This will block the offer related to this coupon.",
    icon: 'warning',
    showCancelButton: true,
    confirmButtonColor: '#3085d6',
    cancelButtonColor: '#d33',
    confirmButtonText: 'Deactivate'
  }).then((result) => {
    if (result.isConfirmed) {
      $.ajax({
        method: "GET",
        url: "{% url 'block_coupon' %}",
        data : data,
        success:function(response){
          Swal.fire(
            'Coupon Deactivated',
            'The selected coupon successfully deactivated.',
            'success'
          )
        location.reload();

        }
      })
     
    }
  })
}


function actCoupon(couponId){
  var data = { 'couponId' : couponId}
  
  Swal.fire({
    title: 'Activate this offer',
    text: "You are going to activate this offer",
    icon: 'warning',
    showCancelButton: true,
    confirmButtonColor: '#3085d6',
    cancelButtonColor: '#d33',
    confirmButtonText: 'Activate User.!'
  }).then((result) => {
    if (result.isConfirmed) {
      $.ajax({
        method: "GET",
        url: "{% url 'activate_coupon' %}",
        data : data,
        success:function(response){
         
          Swal.fire(
            'Coupon Activated',
            'Coupon has been successfully activated.',
            'success'
          )
        location.reload();

        }
      })
     
    }
  })
}

function delCoupon(couponId){
  var data = { 'couponId' : couponId}
  
  Swal.fire({
    title: 'Delete this offer !',
    text: "Are you sure? You will not be able to revert this..",
    icon: 'warning',
    showCancelButton: true,
    confirmButtonColor: '#3085d6',
    cancelButtonColor: '#d33',
    confirmButtonText: 'Delete Coupon.'
  }).then((result) => {
    if (result.isConfirmed) {
      $.ajax({
        method: "GET",
        url: "{% url 'delete_coupon' %}",
        data : data,
        success:function(response){
         
          Swal.fire(
            'User Deleted',
            'User has been successfully Deleted.',
            'success'
          )
        location.reload();

        }
      })
     
    }
  })
}







function blockProOffer(proOffId){
  var data = {'proOffId' : proOffId}
 
  Swal.fire({
    title: 'Are you sure?',
    text: "This will block the offer related to this coupon.",
    icon: 'warning',
    showCancelButton: true,
    confirmButtonColor: '#3085d6',
    cancelButtonColor: '#d33',
    confirmButtonText: 'Deactivate'
  }).then((result) => {
    if (result.isConfirmed) {
      $.ajax({
        method: "GET",
        url: "{% url 'block_product_offer' %}",
        data : data,
        success:function(response){
          Swal.fire(
            'Coupon Deactivated',
            'The selected coupon successfully deactivated.',
            'success'
          )
        location.reload();

        }
      })
     
    }
  })
}



function actProOffer(proOffId){
  var data = { 'proOffId' : proOffId}
  
  Swal.fire({
    title: 'Activate this offer',
    text: "You are going to activate this offer",
    icon: 'warning',
    showCancelButton: true,
    confirmButtonColor: '#3085d6',
    cancelButtonColor: '#d33',
    confirmButtonText: 'Activate'
  }).then((result) => {
    if (result.isConfirmed) {
      $.ajax({
        method: "GET",
        url: "{% url 'activate_product_offer' %}",
        data : data,
        success:function(response){
         
          Swal.fire(
            'Offer Activated',
            'Offer has been successfully activated.',
            'success'
          )
        location.reload();

        }
      })
     
    }
  })
}

function delProOffer(proOffId){
  var data = { 'proOffId' : proOffId}
  
  Swal.fire({
    title: 'Delete this offer !',
    text: "Are you sure? You will not be able to revert this..",
    icon: 'warning',
    showCancelButton: true,
    confirmButtonColor: '#3085d6',
    cancelButtonColor: '#d33',
    confirmButtonText: 'Delete'
  }).then((result) => {
    if (result.isConfirmed) {
      $.ajax({
        method: "GET",
        url: "{% url 'delete_product_offer' %}",
        data : data,
        success:function(response){
         
          Swal.fire(
            'Offer Deleted',
            'Offer has been successfully Deleted.',
            'success'
          )
        location.reload();

        }
      })
     
    }
  })
}




function blockCatOffer(catOffId){
  var data = {'catOffId' : catOffId}
 
  Swal.fire({
    title: 'Are you sure?',
    text: "This will block the offer related to this coupon.",
    icon: 'warning',
    showCancelButton: true,
    confirmButtonColor: '#3085d6',
    cancelButtonColor: '#d33',
    confirmButtonText: 'Deactivate'
  }).then((result) => {
    if (result.isConfirmed) {
      $.ajax({
        method: "GET",
        url: "{% url 'block_cat_offer' %}",
        data : data,
        success:function(response){
          Swal.fire(
            'Coupon Deactivated',
            'The selected coupon successfully deactivated.',
            'success'
          )
        location.reload();

        }
      })
     
    }
  })
}


function actCatOffer(catOffId){
  var data = { 'catOffId' : catOffId}
  
  Swal.fire({
    title: 'Activate this offer',
    text: "You are going to activate this offer",
    icon: 'warning',
    showCancelButton: true,
    confirmButtonColor: '#3085d6',
    cancelButtonColor: '#d33',
    confirmButtonText: 'Activate'
  }).then((result) => {
    if (result.isConfirmed) {
      $.ajax({
        method: "GET",
        url: "{% url 'activate_cat_offer' %}",
        data : data,
        success:function(response){
         
          Swal.fire(
            'Offer Activated',
            'Offer has been successfully activated.',
            'success'
          )
        location.reload();

        }
      })
     
    }
  })
}

function delCatOffer(catOffId){
  var data = { 'catOffId' : catOffId}
  
  Swal.fire({
    title: 'Delete this offer !',
    text: "Are you sure? You will not be able to revert this..",
    icon: 'warning',
    showCancelButton: true,
    confirmButtonColor: '#3085d6',
    cancelButtonColor: '#d33',
    confirmButtonText: 'Delete'
  }).then((result) => {
    if (result.isConfirmed) {
      $.ajax({
        method: "GET",
        url: "{% url 'delete_cat_offer' %}",
        data : data,
        success:function(response){
         
          Swal.fire(
            'Offer Deleted',
            'Offer has been successfully Deleted.',
            'success'
          )
        location.reload();

        }
      })
     
    }
  })
}

</script>



    {% endblock %} 
<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="{% static 'assets/js/vendor-all.min.js' %}"></script>
<script src="{% static 'assets/plugins/bootstrap/js/bootstrap.min.js' %}"></script>
<script src="{% static 'assets/js/pagestyle.js' %}"></script>
<!-- Latest compiled JavaScript -->
<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script> -->
<!-- Github buttons -->
<script async defer src="https://buttons.github.io/buttons.js"></script>
<!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
<script src="{% static 'assets/js/material-dashboard.min.js?v=3.0.2' %}"></script>
</body>
</html>  
   
    